# é‡‘èåˆ†æ Skill

## ğŸ“Š æ¦‚è¿°

è¿™æ˜¯ä¸€ä¸ªä¸“ä¸šçš„é‡‘èåˆ†æ skillï¼Œä¸º Claude Code æä¾›å¼ºå¤§çš„é‡‘èæ•°æ®åˆ†æèƒ½åŠ›ã€‚é€šè¿‡ MCP (Model Context Protocol) åè®®é›†æˆï¼Œå¯ä»¥ç›´æ¥åœ¨å¯¹è¯ä¸­è°ƒç”¨é‡‘èåˆ†æå·¥å…·ã€‚

## ğŸ¯ åŠŸèƒ½åˆ—è¡¨

### 1. è‚¡ç¥¨åˆ†æ (analyze_stock)
æ·±åº¦åˆ†æè‚¡ç¥¨çš„æŠ•èµ„ä»·å€¼ï¼ŒåŒ…æ‹¬åŸºæœ¬é¢å’ŒæŠ€æœ¯é¢æŒ‡æ ‡ã€‚

**åŠŸèƒ½**ï¼š
- åŸºæœ¬é¢åˆ†æï¼šP/Eæ¯”ç‡ã€P/Bæ¯”ç‡ã€ROEã€å€ºåŠ¡æ¯”ç‡ã€åˆ©æ¶¦ç‡
- æŠ€æœ¯é¢åˆ†æï¼šè¶‹åŠ¿åˆ¤æ–­ã€æ”¯æ’‘ä½ã€é˜»åŠ›ä½ã€RSIã€MACD
- æŠ•èµ„å»ºè®®ï¼šç»¼åˆè¯„ä¼°åçš„æ“ä½œå»ºè®®

**ä½¿ç”¨åœºæ™¯**ï¼š
- è¯„ä¼°æŸåªè‚¡ç¥¨æ˜¯å¦å€¼å¾—æŠ•èµ„
- å¯¹æ¯”ä¸åŒè‚¡ç¥¨çš„æŠ•èµ„ä»·å€¼
- è¿½è¸ªæŒä»“è‚¡ç¥¨çš„è¡¨ç°

### 2. è´¢åŠ¡æ¯”ç‡è®¡ç®— (calculate_financial_ratios)
è®¡ç®—å’Œåˆ†æä¼ä¸šçš„å…³é”®è´¢åŠ¡æŒ‡æ ‡ã€‚

**è®¡ç®—æŒ‡æ ‡**ï¼š
- **ç›ˆåˆ©èƒ½åŠ›**ï¼šåˆ©æ¶¦ç‡ã€ROEã€ROA
- **è´¢åŠ¡æ æ†**ï¼šå€ºåŠ¡æƒç›Šæ¯”
- **è¿è¥æ•ˆç‡**ï¼šèµ„äº§å‘¨è½¬ç‡
- **ä¼°å€¼æŒ‡æ ‡**ï¼šP/Eæ¯”ç‡ã€P/Bæ¯”ç‡ï¼ˆå¦‚æä¾›å¸‚å€¼ï¼‰

**ä½¿ç”¨åœºæ™¯**ï¼š
- åˆ†æä¼ä¸šè´¢åŠ¡å¥åº·çŠ¶å†µ
- å¯¹æ¯”åŒè¡Œä¸šå…¬å¸è´¢åŠ¡è¡¨ç°
- è¯„ä¼°ä¼ä¸šæˆé•¿æ€§

### 3. æŠ•èµ„ç»„åˆåˆ†æ (portfolio_analysis)
è¯„ä¼°æŠ•èµ„ç»„åˆçš„æ•´ä½“è¡¨ç°å’Œé£é™©ç‰¹å¾ã€‚

**åˆ†æå†…å®¹**ï¼š
- æŒä»“æ•°é‡å’Œç»“æ„
- åŠ æƒå¹³å‡æ”¶ç›Šç‡
- å¤šæ ·åŒ–è¯„åˆ†
- é£é™©æ°´å¹³è¯„ä¼°
- å†å¹³è¡¡å»ºè®®

**ä½¿ç”¨åœºæ™¯**ï¼š
- æ£€æŸ¥æŠ•èµ„ç»„åˆæ˜¯å¦å‡è¡¡
- è¯„ä¼°æ•´ä½“æ”¶ç›Šè¡¨ç°
- è·å–è°ƒæ•´å»ºè®®

### 4. é£é™©è¯„ä¼° (risk_assessment)
é‡åŒ–æŠ•èµ„é£é™©ï¼Œæä¾›æ•°æ®æ”¯æŒçš„å†³ç­–ä¾æ®ã€‚

**é£é™©æŒ‡æ ‡**ï¼š
- æ³¢åŠ¨ç‡ï¼ˆæ ‡å‡†å·®ï¼‰
- VaR (Value at Risk)
- é£é™©ç­‰çº§åˆ†ç±»
- é£é™©æ§åˆ¶å»ºè®®

**ä½¿ç”¨åœºæ™¯**ï¼š
- è¯„ä¼°æŠ•èµ„é£é™©æ‰¿å—èƒ½åŠ›
- å†³å®šä»“ä½å¤§å°
- é£é™©é¢„è­¦

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### å®‰è£…ä¾èµ–

```bash
pip install mcp
```

### é…ç½® Claude Code

åœ¨ `~/.claude.json` ä¸­æ·»åŠ ï¼š

```json
{
  "mcpServers": {
    "financial-analysis": {
      "command": "python3",
      "args": [
        "/Users/bytedance/Desktop/Codexis/skills/financial_analysis/server.py"
      ]
    }
  }
}
```

### ä½¿ç”¨ç¤ºä¾‹

#### ç¤ºä¾‹ 1ï¼šåˆ†æè‚¡ç¥¨

```
â¯ å¸®æˆ‘åˆ†æ AAPL è¿™åªè‚¡ç¥¨çš„æŠ•èµ„ä»·å€¼
```

Claude Code ä¼šè‡ªåŠ¨è°ƒç”¨ `analyze_stock` å·¥å…·ï¼Œè¿”å›è¯¦ç»†çš„åˆ†ææŠ¥å‘Šã€‚

#### ç¤ºä¾‹ 2ï¼šè®¡ç®—è´¢åŠ¡æ¯”ç‡

```
â¯ åˆ†æè¿™å®¶å…¬å¸çš„è´¢åŠ¡çŠ¶å†µï¼š
è¥ä¸šæ”¶å…¥ï¼š1000äº¿ç¾å…ƒ
å‡€åˆ©æ¶¦ï¼š200äº¿ç¾å…ƒ
æ€»èµ„äº§ï¼š5000äº¿ç¾å…ƒ
è‚¡ä¸œæƒç›Šï¼š2000äº¿ç¾å…ƒ
æ€»è´Ÿå€ºï¼š3000äº¿ç¾å…ƒ
å¸‚å€¼ï¼š2500äº¿ç¾å…ƒ
```

#### ç¤ºä¾‹ 3ï¼šæŠ•èµ„ç»„åˆåˆ†æ

```
â¯ è¯„ä¼°æˆ‘çš„æŠ•èµ„ç»„åˆï¼š
- AAPL 30% å¹´æ”¶ç›Š 15%
- TSLA 20% å¹´æ”¶ç›Š 25%
- MSFT 25% å¹´æ”¶ç›Š 12%
- GOOGL 25% å¹´æ”¶ç›Š 18%
```

#### ç¤ºä¾‹ 4ï¼šé£é™©è¯„ä¼°

```
â¯ è¯„ä¼°ä»¥ä¸‹æ”¶ç›Šç‡åºåˆ—çš„é£é™©ï¼š
è¿‡å»12ä¸ªæœˆæ”¶ç›Šç‡ï¼š5%, -2%, 8%, 3%, -5%, 10%, 4%, -3%, 7%, 2%, -4%, 6%
```

## ğŸ› ï¸ å·¥å…·è¯¦ç»†è¯´æ˜

### analyze_stock

**å‚æ•°**ï¼š
- `ticker` (å¿…éœ€): è‚¡ç¥¨ä»£ç ï¼Œå¦‚ "AAPL", "TSLA"
- `analysis_type` (å¯é€‰): åˆ†æç±»å‹
  - `"fundamental"`: åŸºæœ¬é¢åˆ†æ
  - `"technical"`: æŠ€æœ¯é¢åˆ†æ
  - `"comprehensive"`: ç»¼åˆåˆ†æï¼ˆé»˜è®¤ï¼‰

**è¿”å›**ï¼šJSON æ ¼å¼çš„åˆ†ææŠ¥å‘Š

### calculate_financial_ratios

**å‚æ•°**ï¼š
- `revenue` (å¿…éœ€): è¥ä¸šæ”¶å…¥
- `net_income` (å¿…éœ€): å‡€åˆ©æ¶¦
- `total_assets` (å¿…éœ€): æ€»èµ„äº§
- `total_equity` (å¿…éœ€): è‚¡ä¸œæƒç›Š
- `total_liabilities` (å¯é€‰): æ€»è´Ÿå€º
- `market_cap` (å¯é€‰): å¸‚å€¼

**è¿”å›**ï¼šè´¢åŠ¡æ¯”ç‡å’Œè¯„ä¼°ç»“æœ

### portfolio_analysis

**å‚æ•°**ï¼š
- `holdings` (å¿…éœ€): æŒä»“åˆ—è¡¨ï¼Œæ¯é¡¹åŒ…å«ï¼š
  - `ticker`: è‚¡ç¥¨ä»£ç 
  - `weight`: æƒé‡ï¼ˆç™¾åˆ†æ¯”ï¼‰
  - `return`: æ”¶ç›Šç‡

**è¿”å›**ï¼šæŠ•èµ„ç»„åˆåˆ†ææŠ¥å‘Š

### risk_assessment

**å‚æ•°**ï¼š
- `returns` (å¿…éœ€): å†å²æ”¶ç›Šç‡æ•°ç»„
- `confidence_level` (å¯é€‰): ç½®ä¿¡æ°´å¹³ï¼Œé»˜è®¤ 0.95

**è¿”å›**ï¼šé£é™©è¯„ä¼°æŠ¥å‘Š

## ğŸ“ˆ é«˜çº§ç”¨æ³•

### æ‰¹é‡åˆ†æ

```
â¯ å¸®æˆ‘å¯¹æ¯”åˆ†æ AAPLã€MSFTã€GOOGL ä¸‰åªè‚¡ç¥¨
```

### ç»¼åˆåœºæ™¯

```
â¯ æˆ‘æƒ³æŠ•èµ„ç§‘æŠ€è‚¡ï¼Œé¢„ç®— 100ä¸‡ï¼Œå¸®æˆ‘ï¼š
1. åˆ†æ AAPLã€TSLAã€NVDA çš„æŠ•èµ„ä»·å€¼
2. è®¾è®¡ä¸€ä¸ªæŠ•èµ„ç»„åˆ
3. è¯„ä¼°æ•´ä½“é£é™©
```

## ğŸ” æ—¥å¿—ç›‘æ§

ä½¿ç”¨ä»£ç†æ•è·å·¥å…·è°ƒç”¨æ—¥å¿—ï¼š

```bash
# ç»ˆç«¯ 1ï¼šå¯åŠ¨æ—¥å¿—æ•è·
~/start-claude-logging.sh

# ç»ˆç«¯ 2ï¼šä½¿ç”¨ Claude Code
~/claude-logged

# ç»ˆç«¯ 3ï¼šæŸ¥çœ‹æ—¥å¿—
tail -f ~/.claude-reverse-logs/*.log
```

åœ¨æ—¥å¿—ä¸­ä½ å¯ä»¥çœ‹åˆ°ï¼š
- å·¥å…·çš„å®Œæ•´å®šä¹‰
- Claude å¦‚ä½•å†³ç­–è°ƒç”¨å“ªä¸ªå·¥å…·
- ä¼ é€’çš„å‚æ•°
- è¿”å›çš„ç»“æœ
- Claude å¦‚ä½•è§£è¯»å’Œå‘ˆç°ç»“æœ

## ğŸ“ æ‰©å±•å¼€å‘

å¯ä»¥åœ¨ `server.py` ä¸­æ·»åŠ æ›´å¤šé‡‘èåˆ†æå·¥å…·ï¼š

```python
@app.list_tools()
async def list_tools() -> list[Tool]:
    return [
        # ç°æœ‰å·¥å…·...
        
        # æ–°å¢å·¥å…·
        Tool(
            name="technical_indicators",
            description="è®¡ç®—æŠ€æœ¯æŒ‡æ ‡ï¼ˆMAã€EMAã€MACDã€RSIç­‰ï¼‰",
            inputSchema={...}
        )
    ]
```

## ğŸ“ å­¦ä¹ èµ„æº

- [MCP åè®®æ–‡æ¡£](https://modelcontextprotocol.io)
- [Claude Code æ–‡æ¡£](https://docs.anthropic.com/claude/docs)
- [è´¢åŠ¡åˆ†æåŸºç¡€](https://www.investopedia.com)

## ğŸ“¦ æ–‡ä»¶ç»“æ„

```
skills/financial_analysis/
â”œâ”€â”€ README.md          # æœ¬æ–‡æ¡£
â”œâ”€â”€ server.py          # MCP Server å®ç°
â””â”€â”€ examples.md        # æ›´å¤šä½¿ç”¨ç¤ºä¾‹
```

## ğŸ› æ•…éšœæ’æŸ¥

### å·¥å…·æ²¡æœ‰è¢«åŠ è½½

1. æ£€æŸ¥ `~/.claude.json` é…ç½®æ˜¯å¦æ­£ç¡®
2. é‡å¯ Claude Code
3. ç¡®ä¿ Python è·¯å¾„æ­£ç¡®

### MCP Server å¯åŠ¨å¤±è´¥

```bash
# æ‰‹åŠ¨æµ‹è¯• server
python3 server.py
```

### æŸ¥çœ‹è¯¦ç»†æ—¥å¿—

```bash
# Claude Code æ—¥å¿—
tail -f ~/.claude/logs/*.log

# MCP Server æ—¥å¿—
# åœ¨ server.py ä¸­æ·»åŠ  print() è°ƒè¯•
```

---

**ç»´æŠ¤è€…**ï¼šCodexis Team
**æœ€åæ›´æ–°**ï¼š2026-01-31
